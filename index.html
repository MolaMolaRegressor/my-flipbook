<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden; /* Убираем скролл */
            font-family: Arial, sans-serif;
        }
        
        /* ГЛАВНЫЙ КОНТЕЙНЕР */
        .flipbook-container {
            width: 90vw;
            max-width: 900px; /* Ограничиваем максимум */
            height: 80vh;
            min-height: 450px;
            position: relative;
            overflow: hidden;
            border-radius: 5px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            background: #f5f5f5;
        }
        
        /* ОБЛАСТЬ ВИДИМОСТИ */
        .viewport {
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
        }
        
        /* СЛАЙДЕР */
        .slider {
            display: flex;
            height: 100%;
            position: absolute;
            left: 0;
            top: 0;
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            will-change: transform;
        }
        
        /* ОДНА СТРАНИЦА */
        .page {
            flex: 0 0 100vw; /* ВАЖНО: 100% ширины вьюпорта */
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
        }
        
        /* КАРТИНКА - АВТОМАТИЧЕСКОЕ МАСШТАБИРОВАНИЕ */
        .page-image {
            max-width: 95%;
            max-height: 95%;
            width: auto;
            height: auto;
            object-fit: contain; /* Сохраняет пропорции */
            display: block;
        }
        
        /* СТРЕЛКИ */
        .nav-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.95);
            border: 1px solid #ddd;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 28px;
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            transition: all 0.2s;
        }
        
        .nav-arrow:hover {
            background: white;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            transform: translateY(-50%) scale(1.05);
        }
        
        .nav-arrow:active {
            transform: translateY(-50%) scale(0.95);
        }
        
        .arrow-left {
            left: 25px;
        }
        
        .arrow-right {
            right: 25px;
        }
        
        /* ИНДИКАТОР СТРАНИЦ (опционально) */
        .page-indicator {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            z-index: 10;
        }
        
        /* АДАПТИВНОСТЬ */
        @media (max-width: 768px) {
            .flipbook-container {
                width: 95vw;
                height: 70vh;
            }
            
            .nav-arrow {
                width: 50px;
                height: 50px;
                font-size: 24px;
            }
            
            .arrow-left { left: 10px; }
            .arrow-right { right: 10px; }
        }
    </style>
</head>
<body>
    <div class="flipbook-container">
        <!-- ОБЛАСТЬ ВИДИМОСТИ -->
        <div class="viewport" id="viewport">
            <!-- СЛАЙДЕР -->
            <div class="slider" id="slider">
                <!-- Страницы добавятся через JS -->
            </div>
        </div>
        
        <!-- СТРЕЛКИ -->
        <button class="nav-arrow arrow-left" id="prevBtn">‹</button>
        <button class="nav-arrow arrow-right" id="nextBtn">›</button>
        
        <!-- ИНДИКАТОР (можно убрать) -->
        <div class="page-indicator" id="pageIndicator">1 / 3</div>
    </div>

    <script>
        // ========== КОНФИГУРАЦИЯ ==========
        // ЗАМЕНИТЕ НА ВАШИ ССЫЛКИ!
        const PAGES = [
            '01.jpg',
            '02.jpg',
            '03.jpg'
            // Добавьте больше при необходимости
        ];
        
        // РАЗМЕРЫ ВАШИХ КАРТИНОК (1190×1683)
        const IMAGE_WIDTH = 1190;
        const IMAGE_HEIGHT = 1683;
        
        // ========== ПЕРЕМЕННЫЕ ==========
        let currentPage = 0;
        let slider = null;
        let viewport = null;
        let pageIndicator = null;
        
        // ========== ИНИЦИАЛИЗАЦИЯ ==========
        document.addEventListener('DOMContentLoaded', function() {
            slider = document.getElementById('slider');
            viewport = document.getElementById('viewport');
            pageIndicator = document.getElementById('pageIndicator');
            
            // Рассчитываем начальное положение
            calculateInitialPosition();
            
            // Создаем страницы
            createPages();
            
            // Устанавливаем обработчики
            setupControls();
            
            console.log('Флипбук загружен. Размеры:', IMAGE_WIDTH + '×' + IMAGE_HEIGHT);
        });
        
        // ========== ФУНКЦИИ ==========
        
        // Рассчет начального положения (чтобы показывало первую страницу)
        function calculateInitialPosition() {
            // Ширина слайдера = количество страниц × 100% ширины вьюпорта
            const sliderWidth = PAGES.length * 100;
            slider.style.width = `${sliderWidth}vw`;
            
            // Каждая страница занимает 100vw
            const pageWidth = 100 / PAGES.length;
            
            // Устанавливаем начальную позицию (первая страница по центру)
            slider.style.transform = 'translateX(0vw)';
            currentPage = 0;
            
            updateIndicator();
        }
        
        // Создание страниц
        function createPages() {
            slider.innerHTML = '';
            
            PAGES.forEach((imageUrl, index) => {
                const page = document.createElement('div');
                page.className = 'page';
                page.style.width = `${100 / PAGES.length}%`; // Каждая страница = часть слайдера
                
                const img = document.createElement('img');
                img.className = 'page-image';
                img.src = imageUrl;
                img.alt = `Страница ${index + 1}`;
                
                // Запасной вариант если картинка не загрузилась
                img.onerror = function() {
                    this.onerror = null;
                    this.style.backgroundColor = '#f0f0f0';
                    this.style.display = 'flex';
                    this.style.alignItems = 'center';
                    this.style.justifyContent = 'center';
                    this.innerHTML = `<div style="color:#999; font-size:16px;">Страница ${index + 1}</div>`;
                };
                
                page.appendChild(img);
                slider.appendChild(page);
            });
            
            // Применяем расчеты после создания DOM
            setTimeout(() => {
                calculateInitialPosition();
            }, 100);
        }
        
        // Переход к странице
        function goToPage(pageIndex) {
            if (pageIndex < 0 || pageIndex >= PAGES.length) {
                return false; // Не выходим за границы
            }
            
            currentPage = pageIndex;
            
            // Рассчитываем смещение: -currentPage * 100vw
            const translateX = -currentPage * 100;
            slider.style.transform = `translateX(${translateX}vw)`;
            
            updateIndicator();
            updateArrowStates();
            
            console.log(`Перешли на страницу ${currentPage + 1}, смещение: ${translateX}vw`);
            return true;
        }
        
        // Следующая страница
        function nextPage() {
            if (currentPage < PAGES.length - 1) {
                goToPage(currentPage + 1);
            }
        }
        
        // Предыдущая страница
        function prevPage() {
            if (currentPage > 0) {
                goToPage(currentPage - 1);
            }
        }
        
        // Обновление индикатора
        function updateIndicator() {
            if (pageIndicator) {
                pageIndicator.textContent = `${currentPage + 1} / ${PAGES.length}`;
            }
        }
        
        // Обновление состояния стрелок
        function updateArrowStates() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            // Можно добавить стили для неактивных кнопок
            prevBtn.style.opacity = currentPage === 0 ? '0.5' : '1';
            nextBtn.style.opacity = currentPage === PAGES.length - 1 ? '0.5' : '1';
        }
        
        // Управление
        function setupControls() {
            // Кнопки
            document.getElementById('prevBtn').addEventListener('click', prevPage);
            document.getElementById('nextBtn').addEventListener('click', nextPage);
            
            // Клавиатура
            document.addEventListener('keydown', function(e) {
                if (e.key === 'ArrowRight' || e.key === ' ') nextPage();
                if (e.key === 'ArrowLeft') prevPage();
            });
            
            // Свайп на мобильных
            let touchStartX = 0;
            let touchStartY = 0;
            
            viewport.addEventListener('touchstart', function(e) {
                touchStartX = e.touches[0].clientX;
                touchStartY = e.touches[0].clientY;
                e.preventDefault();
            });
            
            viewport.addEventListener('touchend', function(e) {
                const touchEndX = e.changedTouches[0].clientX;
                const touchEndY = e.changedTouches[0].clientY;
                
                const diffX = touchStartX - touchEndX;
                const diffY = touchStartY - touchEndY;
                
                // Если горизонтальный свайп сильнее вертикального
                if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 50) {
                    if (diffX > 0) nextPage();  // Свайп влево → вперед
                    else prevPage();            // Свайп вправо → назад
                    
                    e.preventDefault();
                }
            });
            
            // Ресайз окна
            window.addEventListener('resize', function() {
                // При изменении размера окна пересчитываем
                setTimeout(() => {
                    goToPage(currentPage);
                }, 100);
            });
            
            // Инициализируем состояния кнопок
            updateArrowStates();
        }
    </script>
</body>
</html>
